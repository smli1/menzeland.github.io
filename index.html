<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!-- <link rel="stylesheet" type="text/css" href="style.css" /> -->
<title>Menzeland</title>
</head>
<style>
    :root{
        --title-width: 200px;
        --main-theme-color: #4989c5;
        --main-theme-light-color: #d6d4f0;
    }

    #page{
        padding: 0;
    }

    #pagetop{
        position: fixed;
        top: 1em;
        width: var(--title-width);
        left: calc(50vw - var(--title-width) / 2);
        text-align: center;
        color: #fff;
        text-shadow:  3px 3px 1px var(--main-theme-color), -1px -1px 7px var(--main-theme-light-color);
        font-size: 2em;
        font-family:fantasy;
    }

    body{
       margin:  0;
    }

    body::before{
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background-size: 1px 10px;
        background: linear-gradient(0deg, var(--main-theme-color), transparent ) repeat-x;
        
    }

    /* width */
    ::-webkit-scrollbar {
        width: 5px;
    }

    /* Track */
    ::-webkit-scrollbar-track {
        background: var(--main-theme-light-color);
    }

    /* Handle */
    ::-webkit-scrollbar-thumb {
        background: var(--main-theme-color);
    }

    /* Handle on hover */
    ::-webkit-scrollbar-thumb:hover {
        background: #555;
    }

    .loop_obj{
        position: fixed;
        width: 100vw;
        height: 100vh;
        padding: 0;
    }

    :root{
        --anim-width: 52.5px;
        --anim-height: 50px;
        --anim-width-offset: 4px;
        --anim-height-offset: 3px;
        --anim-col: 1;
        --anim-early-distance: 5px;
    }

    .animObj{
        position: relative;
        /* background-color: red; */
        width: var(--anim-width);
        height: var(--anim-height);
        margin: 0;
        top: calc(100% - var(--anim-height) + var(--anim-height-offset));
        left: calc( -14px );
        animation-name: animWalk;
        animation-duration: 180s;
        animation-iteration-count: infinite;
        animation-timing-function: linear;
    }

    .sprite{
        position: relative;
        width: inherit;
        height: inherit;
        /* background-color: red; */
        background-image: url('./slime.png');
        background-position: calc(100% * 0 ) calc(100% * 0);
        animation-name: animIdle;
        animation-duration: 1s;
        animation-iteration-count: infinite;
        transform: rotateY(180deg);
    }

    @keyframes animIdle {
        0% {background-position: calc(var(--anim-width) * 0 ) calc(var(--anim-height) * var(--anim-col));
            }
        24.99% {background-position: calc(var(--anim-width) * 0 ) calc(var(--anim-height) * var(--anim-col));}
        25% {background-position: calc(var(--anim-width) * 1 ) calc(var(--anim-height) * var(--anim-col));}
        49.99% {background-position: calc(var(--anim-width) * 1 ) calc(var(--anim-height) * var(--anim-col));}
        50% {background-position: calc(var(--anim-width) * 2 ) calc(var(--anim-height) * var(--anim-col));}
        74.99% {background-position: calc(var(--anim-width) * 2 ) calc(var(--anim-height) * var(--anim-col));}
        75% {background-position: calc(var(--anim-width) * 3 ) calc(var(--anim-height) * var(--anim-col));}
        100% {background-position: calc(var(--anim-width) * 3 ) calc(var(--anim-height) * var(--anim-col));
            }
    }

    @keyframes animWalk {
        0%   { left:calc( 0px - var(--anim-width-offset)); top: calc(100% - var(--anim-height) - var(--anim-height-offset));}
        24%  { left: calc( 100% - var(--anim-width) + var( --anim-width-offset) - var(--anim-early-distance) ); top: calc(100% - var(--anim-height) - var(--anim-height-offset));
                transform: rotate(0deg);}
        26%  { left: calc( 100% - var(--anim-width) + var( --anim-width-offset) ); top: calc(100% - var(--anim-height) - var(--anim-height-offset));
                transform: rotate(-90deg);
            }
        49%  { left:calc( 100% - var(--anim-width) + var( --anim-width-offset) ); top: calc( 0px - var(--anim-height-offset) + var(--anim-early-distance));
            transform: rotate(-90deg);}
        51%  { left:calc( 100% - var(--anim-width) + var( --anim-width-offset) ); top: calc( 0px - var(--anim-height-offset));
            transform: rotate(-180deg);}
        74%  { left:calc( 0px - var(--anim-width-offset) + var(--anim-early-distance)); top:calc( 0px - var(--anim-height-offset));
            transform: rotate(-180deg);}
        76%  { left:calc( 0px - var(--anim-width-offset)); top:calc( 0px - var(--anim-height-offset));
            transform: rotate(-270deg);}
        98% { left: calc( 0px - var(--anim-width-offset)); top: calc(100% - var(--anim-height) - var(--anim-height-offset) - var(--anim-early-distance));transform: rotate(-270deg);}
        100% { left:calc( 0px - var(--anim-width-offset)); top: calc(100% - var(--anim-height) - var(--anim-height-offset) );transform: rotate(-360deg);}
    }
</style>
<body>
    <div id="page">
      <div id="pagetop">
		<!-- <span>Menzeland</span> -->
     </div>
    
    <div id="header">
        
    </div>  
    <div id="main">
        <div class="content" style="background-color: #FFF;">
        </div>
        <div id="footer">

        </div>
    </div>
    <div style="width: 100vw; height: 100vh; position: absolute; top:0; right: 0; margin: 0;padding: 0;
    "></div>
    <!-- <div class="loop_obj">
        <div class="animObj">
            <div class="sprite"></div>
        </div>
    </div> -->
    <div  class="leaves_frame" style="width: 100vw; height: 100vh;position: fixed;">
        <!-- <div style="width: 100vw; height: 100vh; position: relative; top:calc(100vh - 50px);">
            <div style="
                left: 15px;
                top: 3px;
                width: 25px;
                height: 20px;
                position: relative;
                background-color: #217425; 
                clip-path: polygon(66% 74%,81% 46%,86% 9%,52% 10%,24% 28%,5% 60%,0% 100%,47% 89%);
                border: 3px solid #23441d ;">
            </div>
            <div style="
                left: 3px;
                top: 11px;
                transform: rotate(230deg);
                width: 20px;
                height: 20px;
                position: absolute;
                background-color: #58c45e; 
                clip-path: polygon(66% 74%,81% 46%,86% 9%,52% 10%,24% 28%,5% 60%,0% 100%,47% 89%);
                border: 3px solid #23441d ;">
            </div>
            <div style="
                left: 6px;
                top: 3px;
                transform: rotate(280deg);
                width: 20px;
                height: 20px;
                position: absolute;
                background-color: #17921d; 
                clip-path: polygon(66% 74%,81% 46%,86% 9%,52% 10%,24% 28%,5% 60%,0% 100%,47% 89%);
                border: 3px solid #23441d ;">
            </div>
            <div style="
                left: 28px;
                top: 14px;
                transform: rotate(40deg);
                width: 20px;
                height: 20px;
                position: absolute;
                background-color: #17811c; 
                clip-path: polygon(66% 74%,81% 46%,86% 9%,52% 10%,24% 28%,5% 60%,0% 100%,47% 89%);
                border: 3px solid #23441d ;">
            </div>
            </div>
        </div> -->
    </div>
</body>
<script>
    document.addEventListener("DOMContentLoaded", () => {
        // console.log('123');
        let leaves_frame = document.querySelector('.leaves_frame');
        let leaves_obj = document.createElement('div');
        leaves_obj.style.top = 'calc(50vh - 50px)';
        leaves_obj.style.left = 'calc(50vw - 50px)';
        leaves_obj.style.position = 'relative';
        let leaf_total = 37;
        let leaf_freq = 8; 
        let leaf_rotate_temp = 0;  
        let color0 = 'rgb('+ (Math.floor(Math.random() * 105) + 50) +',' + (Math.floor(Math.random() * 105) + 50) +','+ (Math.floor(Math.random() * 155) + 50) + ')'; 
        console.log('new flower')
        for(let num = 1; num <= leaf_total; num++){ 
            console.log(num) 
            setTimeout(function() {
                
            let leaf_obj = document.createElement('div');
            // const color1 = 'rgb(255,42,120)' ;
            const color1 = color0 ;
            const color2 = 'rgb(255,255,255)';
            let percent = num * 1.1 / leaf_total;
            console.log('percent : ' + (percent*100) + '%');
            let rgbNew = colorInterpolate(color1,color2, percent);
            // console.log(rgbNew);
            leaf_obj.style.position = 'absolute';
            // leaf_obj.style.width = Math.floor(Math.random() * 20 + 10) + 'px';
            // leaf_obj.style.height = Math.floor(Math.random() * 20 + 10) + 'px';
            leaf_obj.style.width = (Math.random() * 10 + 45) + 'px';
            leaf_obj.style.height = '50px';
            leaf_obj.style.left = '0px';
            leaf_obj.style.top = '0px';
            // leaf_obj.style.backgroundColor = '#17921d';
            leaf_obj.style.backgroundColor = `rgb( `+rgbNew.r+`,`+rgbNew.g+`,`+rgbNew.b+`)`;
            leaf_rotate_temp = leaf_rotate_temp + (180 / leaf_total * leaf_freq) + Math.floor(Math.random() *30);
            leaf_obj.style.rotate = leaf_rotate_temp + 'deg';
            leaf_obj.style.transformOrigin = '0% 95%';
            leaf_obj.style.clipPath = 'polygon(66% 74%,81% 46%,86% 9%,52% 10%,24% 28%,5% 60%,0% 100%,47% 89%)';
            leaf_obj.style.border = '6px solid '+ color0;
            leaf_obj.style.filter = 'blur('+( 20 * ( (leaf_total - num) / leaf_total) +2)+'px)';
            leaf_obj.style.boxShadow = '5px 5px 5px 60px '+colorInterpolate('rgb(0,0,0)', color0, 0.5);
            leaves_obj.appendChild(leaf_obj);
            }, num * 10);
            // console.log(leaf_obj);
        }
        leaves_frame.appendChild(leaves_obj);
        
        // console.log(leaves_frame);
    });

    function colorInterpolate(colorA, colorB, intval) {
        const rgbA = getRgb(colorA),
            rgbB = getRgb(colorB);
        const colorVal = (prop) =>
            Math.round(rgbA[prop] * (1 - intval) + rgbB[prop] * intval);
        return {
            r: colorVal('r'),
            g: colorVal('g'),
            b: colorVal('b'),
        }
    }

    function getRgb(color) {
    let [r, g, b] = color.replace('rgb(', '')
        .replace(')', '')
        .split(',')
        .map(str => Number(str));;
    return {
        r,
        g,
        b
    }
    }
</script>

</html>
